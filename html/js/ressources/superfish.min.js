(function(b){b.fn.superfish=function(j){var k=b.fn.superfish,n=k.c,o=b('<span class="'+n.arrowClass+'"> &#187;</span>'),l=function(p){var c=b(this),q=f(c);clearTimeout(q.sfTimer);c.showSuperfishUl().siblings().hideSuperfishUl()},h=function(p){var c=b(this),s=f(c),r=k.op;var q=function(){r.retainPath=(b.inArray(c[0],r.$path)>-1);c.hideSuperfishUl();if(r.$path.length&&c.parents("li."+r.hoverClass).length<1){r.onIdle.call();b.proxy(l,r.$path,p)()}};if(p.type!=="mouseleave"&&p.type!=="focusout"){q()}else{clearTimeout(s.sfTimer);s.sfTimer=setTimeout(q,r.delay)}},f=function(c){if(c.hasClass(n.menuClass)){b.error("Superfish requires you to update to a version of hoverIntent that supports event-delegation, such as this one: https://github.com/joeldbirch/onHoverIntent")}var p=c.closest("."+n.menuClass)[0];k.op=k.o[p.serial];return p},i=function(p){var c="li:has(ul)";if(!k.op.useClick){if(b.fn.hoverIntent&&!k.op.disableHI){p.hoverIntent(l,h,c)}else{p.on("mouseenter",c,l).on("mouseleave",c,h)}}p.on("focusin",c,l).on("focusout",c,h).on("click","a",m).on("touchstart","a",g)},g=function(){var c=b(this);if(!c.next("ul").is(":visible")){b(this).data("follow",false)}},m=function(r){var q=b(this),p=q.next("ul"),c=(q.data("follow")===false)?false:true;if(p.length&&(k.op.useClick||!c)){r.preventDefault();if(!p.is(":visible")){b.proxy(l,q.parent(),r)()}else{if(k.op.useClick&&c){b.proxy(h,q.parent(),r)()}}}},e=function(p,c){if(c.autoArrows){p.children("a").each(function(){d(b(this))})}},d=function(c){c.addClass(n.anchorClass).append(o.clone())};return this.addClass(n.menuClass).each(function(){var p=this.serial=k.o.length;var r=b.extend({},k.defaults,j);var c=b(this);var q=c.find("li:has(ul)");r.$path=c.find("li."+r.pathClass).slice(0,r.pathLevels).each(function(){b(this).addClass(r.hoverClass+" "+n.bcClass).filter("li:has(ul)").removeClass(r.pathClass)});k.o[p]=k.op=r;e(q,r);i(c);q.not("."+n.bcClass).hideSuperfishUl();r.onInit.call(this)})};var a=b.fn.superfish;a.o=[];a.op={};a.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator"};a.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",autoArrows:true,disableHI:false,useClick:false,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){},onIdle:function(){}};b.fn.extend({hideSuperfishUl:function(){var f=a.op,c=this,e=(f.retainPath===true)?f.$path:"";f.retainPath=false;var d=b("li."+f.hoverClass,this).add(this).not(e).find(">ul").stop().animate(f.animationOut,f.speedOut,function(){d=b(this);d.parent().removeClass(f.hoverClass);f.onHide.call(d);if(a.op.useClick){c.children("a").data("follow",false)}});return this},showSuperfishUl:function(){var e=a.op,c=this,d=this.addClass(e.hoverClass).find(">ul:hidden");e.onBeforeShow.call(d);d.stop().animate(e.animation,e.speed,function(){e.onShow.call(d);c.children("a").data("follow",true)});return this}})})(jQuery);